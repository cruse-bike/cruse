import{r as Re,w as Ue,x as Qe,y as We,z as je,i as V,a as X,g as N,$ as Ve,d as O,A as Ye,k,B as z,q as ye,v as q,u as b,C as Ze,D as Me,E as He,t as Ge,o as B,s as g,h as C,f as Le,e as se,m as Xe,F as $e}from"../chunks/disclose-version.e3436084.js";import{p as et,i as tt,a as at,b as ie,r as ne,c as rt,g as t,s as Y,e as st,h as oe,f as P,m as le,k as T,j as it}from"../chunks/runtime.e09db590.js";import{p as nt}from"../chunks/parse.bee59afc.js";import{j as ot,k as lt}from"../chunks/singletons.10644159.js";import{r as ct}from"../chunks/index.56af5967.js";const dt=(e,a={})=>{Fe(a);let{colors:i=["#FFC700","#FF0000","#2E3191","#41BBC7"],duration:o=3500,force:r=.5,particleCount:f=150,particleShape:v="mix",particleSize:l=12,destroyAfterDone:u=!0,stageHeight:H=800,stageWidth:_=1600}=a;(function(c){const m=xe("style");m.dataset.neoconfetti="",m.textContent='@keyframes fk9XWG_y-axis{to{transform:translate3d(0,var(--stage-height),0)}}@keyframes fk9XWG_x-axis{to{transform:translate3d(var(--x-landing-point),0,0)}}@keyframes fk9XWG_rotation{50%{transform:rotate3d(var(--half-rotation),180deg)}to{transform:rotate3d(var(--rotation),360deg)}}.fk9XWG_container{width:0;height:0;z-index:1200;position:relative;overflow:visible}.fk9XWG_particle{animation:x-axis var(--duration-chaos)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:fk9XWG_x-axis}.fk9XWG_particle>div{animation:y-axis var(--duration-chaos)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--width);height:var(--height);animation-name:fk9XWG_y-axis;position:absolute;top:0;left:0}.fk9XWG_particle>div:before{height:100%;width:100%;content:"";background-color:var(--bgcolor);animation:rotation var(--rotation-duration)infinite linear;border-radius:var(--border-radius);animation-name:fk9XWG_rotation;display:block}',we(document.head,m)})(),e.classList.add("fk9XWG_container"),e.style.setProperty("--stage-height",H+"px");let E,L=Pe(f,i),x=Ce(e,L);function J(c,m){const y=ce(G()*(mt-1)),d=v!=="rectangles"&&(v==="circles"||gt(y)),p=(n,w)=>c.style.setProperty(n,w+"");p("--x-landing-point",ke(ve(De(m,90)-180),0,180,-_/2,_/2)+"px"),p("--duration-chaos",o-ce(1e3*G())+"ms");const D=G()<ft?Z(G()*vt,2):0;p("--x1",D),p("--x2",-1*D),p("--x3",D),p("--x4",Z(ve(ke(ve(De(m,90)-180),0,180,-1,1)),4)),p("--y1",Z(G()*Te,4)),p("--y2",Z(G()*r*(qe()?1:-1),4)),p("--y3",Te),p("--y4",Z(pt(ke(ve(m-180),0,180,r,-r),0),4)),p("--width",(d?l:ce(4*G())+l/2)+"px"),p("--height",(d?l:ce(2*G())+l)+"px");const s=y.toString(2).padStart(3,"0").split("");p("--half-rotation",s.map(n=>+n/2+"")),p("--rotation",s),p("--rotation-duration",Z(G()*(ut-ze)+ze)+"ms"),p("--border-radius",d?"50%":0)}for(const[c,m]of Object.entries(x))J(m,L[+c].degree);return Promise.resolve().then(()=>E=setTimeout(()=>u&&(e.innerHTML=""),o)),{update(c){Fe(c);const m=c.particleCount??f,y=c.colors??i,d=c.stageHeight??H;if(L=Pe(m,y),m===f&&JSON.stringify(i)!==JSON.stringify(y))for(const[p,{color:D}]of Object.entries(L))x[+p].style.setProperty("--bgcolor",D);m!==f&&(e.innerHTML="",x=Ce(e,L)),u&&!c.destroyAfterDone&&clearTimeout(E),e.style.setProperty("--stage-height",d+"px"),i=y,o=c.duration??o,r=c.force??r,f=m,v=c.particleShape??v,l=c.particleSize??l,u=c.destroyAfterDone??u,H=d,_=c.stageWidth??_},destroy(){clearTimeout(E)}}};function Ce(e,a=[]){const i=[];for(const{color:o}of a){const r=xe("div");r.className="fk9XWG_particle",r.style.setProperty("--bgcolor",o);const f=xe("div");we(r,f),we(e,r),i.push(r)}return i}const ze=200,ut=800,ft=.1,vt=.3,Te=.5,ve=Math.abs,G=Math.random,ce=Math.round,pt=Math.max,xe=e=>document.createElement(e),we=(e,a)=>e.appendChild(a),Pe=(e,a)=>Array.from({length:e},(i,o)=>({color:a[o%a.length],degree:360*o/e})),Z=(e,a=2)=>ce((e+Number.EPSILON)*10**a)/10**a,ke=(e,a,i,o,r)=>(e-a)*(r-o)/(i-a)+o,De=(e,a)=>e+a>360?e+a-360:e+a,qe=()=>G()>.5,mt=6,gt=e=>e!==1&&qe(),Ae=e=>e===void 0,$=(e,a)=>{if(!Ae(e)&&Number.isSafeInteger(e)&&e<0)throw new Error(a+" must be a positive integer")},Fe=({particleCount:e,duration:a,colors:i,particleSize:o,force:r,stageHeight:f,stageWidth:v,particleShape:l})=>{if($(e,"particleCount"),$(a,"duration"),$(o,"particleSize"),$(r,"force"),$(f,"stageHeight"),$(v,"stageWidth"),!Ae(l)&&!/^(mix|circles|rectangles)$/i.test(l))throw new Error('particlesShape should be either "mix" or "circles" or "rectangle"');if(!Ae(i)&&!Array.isArray(i))throw new Error("colors must be an array of strings");if(r>1)throw new Error("force must be within 0 and 1")},_t=ot("invalidate_all");function ht(e){return lt.apply_action(e)}function bt(e){const a=JSON.parse(e);return a.data&&(a.data=nt(a.data)),a}function Ne(e){return HTMLElement.prototype.cloneNode.call(e)}function yt(e,a=()=>{}){const i=async({action:r,result:f,reset:v=!0,invalidateAll:l=!0})=>{f.type==="success"&&(v&&HTMLFormElement.prototype.reset.call(e),l&&await _t()),(location.origin+location.pathname===r.origin+r.pathname||f.type==="redirect"||f.type==="error")&&ht(f)};async function o(r){var J,c,m,y;if(((J=r.submitter)!=null&&J.hasAttribute("formmethod")?r.submitter.formMethod:Ne(e).method)!=="post")return;r.preventDefault();const v=new URL((c=r.submitter)!=null&&c.hasAttribute("formaction")?r.submitter.formAction:Ne(e).action),l=new FormData(e),u=(m=r.submitter)==null?void 0:m.getAttribute("name");u&&l.append(u,((y=r.submitter)==null?void 0:y.getAttribute("value"))??"");const H=new AbortController;let _=!1;const L=await a({action:v,cancel:()=>_=!0,controller:H,get data(){return l},formData:l,get form(){return e},formElement:e,submitter:r.submitter})??i;if(_)return;let x;try{const d=await fetch(v,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:l,signal:H.signal});x=bt(await d.text()),x.type==="error"&&(x.status=d.status)}catch(d){if((d==null?void 0:d.name)==="AbortError")return;x={type:"error",error:d}}L({action:v,get data(){return l},formData:l,get form(){return e},formElement:e,update:d=>i({action:v,result:x,reset:d==null?void 0:d.reset,invalidateAll:d==null?void 0:d.invalidateAll}),result:x})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",o),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",o)}}}const Be="(prefers-reduced-motion: reduce)",kt=()=>window.matchMedia(Be).matches,xt=ct(kt(),e=>{{const a=o=>{e(o.matches)},i=window.matchMedia(Be);return i.addEventListener("change",a),()=>{i.removeEventListener("change",a)}}});function Oe(e,a,i){var r;const o=e.target.getAttribute("data-key");o==="backspace"?(P(a,t(a).slice(0,-1)),(r=t(i))!=null&&r.badGuess&&le(i,t(i).badGuess=!1)):t(a).length<5&&P(a,t(a)+o)}var wt=k('<meta name="description" content="A Wordle clone written in SvelteKit">'),At=k("(correct)",!0),Et=k("(present)",!0),St=k("(absent)",!0),Wt=k("empty",!0),jt=k('<div class="letter svelte-1pg2j5l"> <span class="visually-hidden"><!></span> <input name="guess" type="hidden"></div>'),Mt=k('<h2 class="visually-hidden"> </h2> <div class="row svelte-1pg2j5l"></div>',!0),Ht=k("<p> </p>"),Gt=k('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',!0),Lt=k('<button formaction="?/update" name="key"> </button>'),Xt=k('<div class="row svelte-1pg2j5l"></div>'),Ct=k('<div class="keyboard svelte-1pg2j5l"><button data-key="enter" class="svelte-1pg2j5l">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),zt=k('<div style="position: absolute; left: 50%; top: 30%"></div>'),Tt=k('<h1 class="visually-hidden">Sverdle</h1> <form method="POST" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div class="grid svelte-1pg2j5l"></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',!0);function qt(e,a){et(a,!1);const i={};tt(i);const o=()=>it(xt,"$reduced_motion",i),r=Y(),f=Y(),v=Y(),l=Y();let u=st(a,"data"),H=at(a,"form"),_=Y(),E=Y();function L(s){var n;s.metaKey||s.key==="Enter"&&!t(l)||(n=document.querySelector(`[data-key="${s.key}" i]`))==null||n.dispatchEvent(new MouseEvent("click",{cancelable:!0}))}ie(()=>{u(),oe(()=>{P(r,u().answers.at(-1)==="xxxxx")})}),ie(()=>{t(r),u(),oe(()=>{P(f,t(r)?-1:u().answers.length)})}),ie(()=>{u(),t(f),oe(()=>{P(v,u().guesses[t(f)]||"")})}),ie(()=>{t(v),oe(()=>{P(l,t(v).length===5)})}),ie(()=>{t(_),t(E),u(),oe(()=>{P(_,{}),P(E,{}),u().answers.forEach((s,n)=>{const w=u().guesses[n];for(let h=0;h<5;h+=1){const S=w[h];s[h]==="x"?(le(_,t(_)[S]="exact"),le(E,t(E)[S]="correct")):t(_)[S]||(le(_,t(_)[S]=s[h]==="c"?"close":"missing"),le(E,t(E)[S]=s[h]==="c"?"present":"absent"))}})})});var x=B(e,!0,Tt),J=se(x);Ue(s=>{var n=N(s,!0,wt);Ve.title="Sverdle",O(s,n)});var c=g(g(J)),m=C(c),y=g(g(m)),d=g(g(y)),p=C(d),D=g(g(c));ne(()=>{var s;z(y,"playing",!t(r)),z(y,"bad-guess",(s=t(H))==null?void 0:s.badGuess)}),Qe("keydown",Ye,L,!1),We(c,(s,n)=>yt(s,n),()=>()=>({update:s})=>{s({reset:!1})}),je(y,()=>Array.from(Array(6).keys()),13,s=>b(s),(s,n,w)=>{var h=B(s,!0,Mt),S=se(h);const j=T(()=>b(n)===t(f));var F=C(S),I=g(g(S));ne(()=>{ye(F,`Row ${q(b(n)+1)}`),z(I,"current",t(j))}),je(I,()=>Array.from(Array(5).keys()),13,ee=>b(ee),(ee,K,pe)=>{var A=N(ee,!0,jt);const me=T(()=>t(j)?t(v):u().guesses[b(n)]),W=T(()=>{var M;return(M=u().answers[b(n)])==null?void 0:M[b(K)]}),de=T(()=>{var M;return((M=t(me))==null?void 0:M[b(K)])??""}),te=T(()=>t(j)&&b(K)===t(me).length),R=T(()=>t(W)==="x"),U=T(()=>t(W)==="c"),Q=T(()=>t(W)==="_");var Ee=C(A),Se=g(Ee),Je=C(Se),ge=g(g(Se));Ze(ge);var _e,he;ne(()=>{z(A,"exact",t(R)),z(A,"close",t(U)),z(A,"missing",t(Q)),z(A,"selected",t(te)),ye(Ee,`${q(t(de))} `),_e!==(_e=!t(j))&&(ge.disabled=_e),he!==(he=t(de))&&(ge.value=he)}),V(Je,()=>t(R),M=>{var ue=B(M,!0,At);X(M,ue)},M=>{var ue=Le(M),Ie=se(ue);V(Ie,()=>t(U),ae=>{var fe=B(ae,!0,Et);X(ae,fe)},ae=>{var fe=Le(ae),Ke=se(fe);V(Ke,()=>t(Q),re=>{var be=B(re,!0,St);X(re,be)},re=>{var be=B(re,!0,Wt);X(re,be)}),X(ae,fe)}),X(M,ue)}),O(ee,A)},null),X(s,h)},null),V(p,()=>t(r)||u().answers.length>=6,s=>{var n=B(s,!0,Gt),w=se(n),h=g(g(w)),S=C(h);Ge(S,()=>`${q(t(r)?"you won :)":"game over :(")} play again?`),V(w,()=>!t(r)&&u().answer,j=>{var F=N(j,!0,Ht),I=C(F);Ge(I,()=>`the answer was "${q(u().answer)}"`),O(j,F)},null),X(s,n)},s=>{var n=N(s,!0,Ct),w=C(n),h=g(g(w)),S=g(g(h)),j;ne(()=>{j!==(j=!t(l))&&(w.disabled=j),z(w,"selected",t(l))}),h.__click=[Me(Oe),v,H],He(S,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],1,(F,I,ee)=>{var K=N(F,!0,Xt);He(K,()=>b(I),9,(pe,A,me)=>{var W=N(pe,!0,Lt),de=C(W),te,R,U,Q;ne(()=>{te!==(te=b(A))&&Xe(W,"data-key",te),$e(W,`${q(t(_)[b(A)])} svelte-1pg2j5l`),R!==(R=t(l))&&(W.disabled=R),U!==(U=b(A))&&(W.value=U),Q!==(Q=`${q(b(A))} ${q(t(E)[b(A)]||"")}`)&&Xe(W,"aria-label",Q),ye(de,b(A))}),W.__click=[Me(Oe),v,H],O(pe,W)},null),O(F,K)},null),O(s,n)}),V(D,()=>t(r),s=>{var n=N(s,!0,zt);We(n,(w,h)=>dt(w,h),()=>({particleCount:o()?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),O(s,n)},null),X(e,x),rt()}Re(["click"]);export{qt as component};
